import{_ as e,o as a,c as i,R as o}from"./chunks/framework.EUU6lLMq.js";const k=JSON.parse('{"title":"Magisk との違い","description":"","frontmatter":{},"headers":[],"relativePath":"ja_JP/guide/difference-with-magisk.md","filePath":"ja_JP/guide/difference-with-magisk.md"}'),s={name:"ja_JP/guide/difference-with-magisk.md"},l=o('<h1 id="magisk-との違い" tabindex="-1">Magisk との違い <a class="header-anchor" href="#magisk-との違い" aria-label="Permalink to &quot;Magisk との違い&quot;">​</a></h1><p>KernelSU モジュールと Magisk モジュールには多くの共通点がありますが、実装の仕組みが全く異なるため、必然的にいくつかの相違点が存在します。Magisk と KernelSU の両方でモジュールを動作させたい場合、これらの違いを理解する必要があります。</p><h2 id="似ているところ" tabindex="-1">似ているところ <a class="header-anchor" href="#似ているところ" aria-label="Permalink to &quot;似ているところ&quot;">​</a></h2><ul><li>モジュールファイルの形式：どちらもzip形式でモジュールを整理しており、モジュールの形式はほぼ同じです。</li><li>モジュールのインストールディレクトリ：どちらも <code>/data/adb/modules</code> に配置されます。</li><li>システムレス：どちらもモジュールによるシステムレスな方法で /system を変更できます。</li><li>post-fs-data.sh: 実行時間と意味は全く同じです。</li><li>service.sh: 実行時間と意味は全く同じです。</li><li>system.prop：全く同じです。</li><li>sepolicy.rule：全く同じです。</li><li>BusyBox：スクリプトは BusyBox で実行され、どちらの場合も「スタンドアロンモード」が有効です。</li></ul><h2 id="違うところ" tabindex="-1">違うところ <a class="header-anchor" href="#違うところ" aria-label="Permalink to &quot;違うところ&quot;">​</a></h2><p>違いを理解する前に、モジュールが KernelSU で動作しているか Magisk で動作しているかを区別する方法を知っておく必要があります。環境変数 <code>KSU</code> を使うとモジュールスクリプトを実行できるすべての場所 (<code>customize.sh</code>, <code>post-fs-data.sh</code>, <code>service.sh</code>) で区別できます。KernelSU では、この環境変数に <code>true</code> が設定されます。</p><p>以下は違いです：</p><ul><li>KernelSU モジュールは、リカバリーモードではインストールできません。</li><li>KernelSU モジュールには Zygisk のサポートが組み込まれていません（ただし<a href="https://github.com/Dr-TSNG/ZygiskNext" target="_blank" rel="noreferrer">ZygiskNext</a>を使うと Zygisk モジュールを使用できます）。</li><li>KernelSU モジュールにおけるファイルの置換や削除の方法は、Magisk とは全く異なります。KernelSU は <code>.replace</code> メソッドをサポートしていません。その代わり、<code>mknod filename c 0 0</code> で同名のファイルを作成し、対応するファイルを削除する必要があります。</li><li>BusyBox 用のディレクトリが違います。KernelSU の組み込み BusyBox は <code>/data/adb/ksu/bin/busybox</code> に、Magisk では <code>/data/adb/magisk/busybox</code> に配置されます。<strong>これは KernelSU の内部動作であり、将来的に変更される可能性があることに注意してください!</strong></li><li>KernelSU は <code>.replace</code> ファイルをサポートしていません。しかし、KernelSU はファイルやフォルダを削除したり置き換えたりするための <code>REMOVE</code> と <code>REPLACE</code> 変数をサポートしています。</li></ul>',8),t=[l];function r(d,c,n,h,_,u){return a(),i("div",null,t)}const p=e(s,[["render",r]]);export{k as __pageData,p as default};
